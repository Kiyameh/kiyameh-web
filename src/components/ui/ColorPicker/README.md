# ColorPicker Component

Un componente de selector de color completo y accesible que soporta m√∫ltiples espacios de color (OKLCH, HSL, sRGB) con una interfaz visual intuitiva.

## üìã Tabla de Contenidos

- [Caracter√≠sticas](#-caracter√≠sticas)
- [Instalaci√≥n](#-instalaci√≥n)
- [Uso B√°sico](#-uso-b√°sico)
- [Props](#-props)
- [Espacios de Color Soportados](#-espacios-de-color-soportados)
- [Componentes](#-componentes)
- [Accesibilidad](#-accesibilidad)
- [Personalizaci√≥n](#-personalizaci√≥n)
- [Ejemplos](#-ejemplos)
- [API Reference](#-api-reference)

## ‚ú® Caracter√≠sticas

- üé® **M√∫ltiples espacios de color**: OKLCH, HSL, sRGB
- üñ±Ô∏è **Selector visual interactivo**: Canvas con gradientes de color
- ‚å®Ô∏è **Navegaci√≥n por teclado**: Completamente accesible
- üéØ **Sliders precisos**: Control granular de cada canal de color
- üì± **Responsive**: Se adapta a diferentes tama√±os de pantalla
- ‚ôø **Accesible**: Cumple con est√°ndares WCAG
- üîÑ **Conversi√≥n autom√°tica**: Entre diferentes espacios de color
- üé≠ **Personalizable**: CSS modules para f√°cil customizaci√≥n

## üì¶ Instalaci√≥n

```bash
# Dependencias requeridas
npm install colorjs.io
```

## üöÄ Uso B√°sico

```tsx
import ColorPicker from './components/ui/ColorPicker/ColorPicker';

function App() {
  const handleColorChange = (color: string) => {
    console.log('Color seleccionado:', color);
  };

  return (
    <ColorPicker 
      onChange={handleColorChange}
      initialColor="oklch(0.64 0.25 8)"
    />
  );
}
```

## üîß Props

### ColorPicker

| Prop | Tipo | Requerido | Default | Descripci√≥n |
|------|------|-----------|---------|-------------|
| `onChange` | `(color: string) => void` | ‚úÖ | - | Callback que se ejecuta cuando el color cambia |
| `value` | `string` | ‚ùå | `"oklch(0.64 0.25 8/100)"` | Color actual del picker |

### SingleColorPopover

| Prop | Tipo | Requerido | Default | Descripci√≥n |
|------|------|-----------|---------|-------------|
| `initialColor` | `string` | ‚ùå | `"#3b82f6"` | Color inicial del popover |
| `onChange` | `(color: string) => void` | ‚ùå | - | Callback que se ejecuta cuando el color cambia |

### DualColorPopover

| Prop | Tipo | Requerido | Default | Descripci√≥n |
|------|------|-----------|---------|-------------|
| `initialSurfaceColor` | `string` | ‚ùå | `"#ffffff"` | Color inicial de superficie |
| `initialContentColor` | `string` | ‚ùå | `"#000000"` | Color inicial de contenido |
| `onSurfaceColorChange` | `(color: string) => void` | ‚ùå | - | Callback espec√≠fico para cambios en color de superficie |
| `onContentColorChange` | `(color: string) => void` | ‚ùå | - | Callback espec√≠fico para cambios en color de contenido |
| `onChange` | `(colors: {surfaceColor: string, contentColor: string}) => void` | ‚ùå | - | Callback que recibe ambos colores |

## üé® Espacios de Color Soportados

### OKLCH (Recomendado)

- **L**: Lightness (0-1) - Luminosidad
- **C**: Chroma (0-0.37) - Saturaci√≥n
- **H**: Hue (0-360¬∞) - Matiz
- **A**: Alpha (0-1) - Transparencia

```css
oklch(0.64 0.25 8 / 1)
```

### HSL

- **H**: Hue (0-360¬∞) - Matiz
- **S**: Saturation (0-100%) - Saturaci√≥n  
- **L**: Lightness (0-100%) - Luminosidad
- **A**: Alpha (0-1) - Transparencia

```css
hsl(8, 25%, 64%)
```

### sRGB

- **R**: Red (0-255) - Rojo
- **G**: Green (0-255) - Verde
- **B**: Blue (0-255) - Azul
- **A**: Alpha (0-1) - Transparencia

```css
rgb(255, 128, 64)
```

## üß© Componentes

### ColorPicker (Componente Principal)

Componente principal que orquesta todos los selectores y maneja el estado global.

### SingleColorPopover (Selector de un color)

Componente que combina el ColorPicker con un Popover para una experiencia de selecci√≥n de color compacta.

**Caracter√≠sticas:**

- üéØ **Trigger visual**: Bot√≥n que muestra el color seleccionado
- üöÄ **Popover integrado**: Se abre al hacer click, se cierra autom√°ticamente
- üé® **ColorPicker completo**: Acceso a todos los modos de color
- ‚ôø **Accesible**: Labels y navegaci√≥n por teclado

```tsx
import SingleColorPopover from './components/ui/ColorPicker/SingleColorPopover';

<SingleColorPopover
  initialColor="#3b82f6"
  onChange={(color) => console.log('Color:', color)}
/>
```

### DualColorPopover (Selector de dos colores)

Componente avanzado para seleccionar dos colores relacionados (superficie y contenido) con preview en tiempo real.

**Caracter√≠sticas:**

- üé® **Doble selecci√≥n**: Surface color y content color
- üëÅÔ∏è **Preview visual**: Muestra la letra "A" con los colores aplicados
- üîÑ **Tabs din√°micos**: Alterna entre selectores de superficie y contenido
- üéØ **Callbacks espec√≠ficos**: Eventos separados para cada color
- üì± **Responsive**: Interfaz adaptable y moderna

```tsx
import DualColorPopover from './components/ui/ColorPicker/DualColorPopover';

<DualColorPopover
  initialSurfaceColor="#ffffff"
  initialContentColor="#000000"
  onChange={({ surfaceColor, contentColor }) => {
    console.log('Surface:', surfaceColor);
    console.log('Content:', contentColor);
  }}
/>
```

### HexSelector

Selector visual interactivo con canvas que permite seleccionar colores mediante:

- **Click**: Selecci√≥n directa
- **Drag**: Selecci√≥n continua
- **Teclado**: Enter/Espacio para seleccionar centro

### RgbaSelector

Sliders para controlar los canales RGB + Alpha con:

- Gradientes visuales din√°micos
- Valores num√©ricos en tiempo real
- Thumbs coloreados seg√∫n el canal

### HslSelector  

Sliders para el espacio de color HSL con:

- Gradiente de matiz completo (0-360¬∞)
- Saturaci√≥n y luminosidad contextuales
- Visualizaci√≥n en porcentajes

### OklchSelector

Sliders para el moderno espacio OKLCH con:

- Gradiente de matiz perceptualmente uniforme
- Control preciso de croma y luminosidad
- Mejor representaci√≥n de colores

## ‚ôø Accesibilidad

### Caracter√≠sticas Implementadas

- ‚úÖ **IDs √∫nicos**: Usando `useId()` para evitar conflictos
- ‚úÖ **Labels asociados**: Todos los inputs tienen labels correctos
- ‚úÖ **Navegaci√≥n por teclado**: Tab, Enter, Espacio
- ‚úÖ **ARIA attributes**: `role`, `aria-labelledby`, `aria-label`
- ‚úÖ **Focus management**: Indicadores visuales claros

### Navegaci√≥n por Teclado

- `Tab`: Navegar entre elementos
- `Enter/Espacio`: Activar selector de canvas
- `Flechas`: Ajustar valores de sliders
- `Escape`: Salir del modo de edici√≥n

## üé® Personalizaci√≥n

### CSS Variables Disponibles

```css
:root {
  --border-soft: #e5e7eb;
  --border: #d1d5db;
  --primary: #3b82f6;
  --surface-100: #f8fafc;
  --surface-300: #cbd5e1;
  --content: #1f2937;
  --font-mono: 'Monaco', 'Menlo', monospace;
  --radius-medium: 8px;
  --radius-large: 12px;
}
```

### Clases CSS Principales

- `.container`: Contenedor principal
- `.modes`: Botones de modo de color
- `.badge`: Estilo de badges de modo
- `.panel`: Panel de controles
- `.slider`: Sliders de color
- `.colorPreview`: Vista previa del color
- `.hexSelectorContainer`: Contenedor del canvas

## üìö Ejemplos

### ColorPicker - Ejemplo con Color Inicial

```tsx
<ColorPicker 
  onChange={(color) => setBackgroundColor(color)}
  value="#ff6b35"
/>
```

### SingleColorPopover - Selector Compacto

```tsx
const [selectedColor, setSelectedColor] = useState('#3b82f6');

<SingleColorPopover
  initialColor={selectedColor}
  onChange={(color) => {
    setSelectedColor(color);
    // Aplicar color inmediatamente
    document.body.style.backgroundColor = color;
  }}
/>
```

### DualColorPopover - Theme Builder

```tsx
const [theme, setTheme] = useState({
  surface: '#ffffff',
  content: '#1a1a1a'
});

<DualColorPopover
  initialSurfaceColor={theme.surface}
  initialContentColor={theme.content}
  onChange={({ surfaceColor, contentColor }) => {
    setTheme({ surface: surfaceColor, content: contentColor });
    
    // Aplicar tema a CSS variables
    document.documentElement.style.setProperty('--surface', surfaceColor);
    document.documentElement.style.setProperty('--content', contentColor);
  }}
  onSurfaceColorChange={(color) => {
    console.log('Surface color changed:', color);
  }}
  onContentColorChange={(color) => {
    console.log('Content color changed:', color);
  }}
/>
```

### Ejemplo con Callback Complejo

```tsx
const handleColorChange = (color: string) => {
  // Guardar en localStorage
  localStorage.setItem('selectedColor', color);
  
  // Actualizar tema
  document.documentElement.style.setProperty('--theme-color', color);
  
  // Callback personalizado
  onColorUpdate?.(color);
};

<ColorPicker onChange={handleColorChange} />
```

### Ejemplo con Validaci√≥n

```tsx
const [color, setColor] = useState('#000000');
const [isValid, setIsValid] = useState(true);

const validateAndSetColor = (newColor: string) => {
  try {
    new Color(newColor);
    setColor(newColor);
    setIsValid(true);
  } catch {
    setIsValid(false);
  }
};

<ColorPicker 
  onChange={validateAndSetColor}
  initialColor={color}
/>
{!isValid && <p>Color inv√°lido</p>}
```

## üìñ API Reference

### ColorPicker (API)

```tsx
interface ColorPickerProps {
  onChange: (color: string) => void;
  value?: string;
}
```

### SingleColorPopover (API)

```tsx
interface SingleColorPopoverProps {
  initialColor?: string;
  onChange?: (color: string) => void;
}
```

### DualColorPopover (API)

```tsx
interface DualColorPopoverProps {
  initialSurfaceColor?: string;
  initialContentColor?: string;
  onSurfaceColorChange?: (color: string) => void;
  onContentColorChange?: (color: string) => void;
  onChange?: (colors: { surfaceColor: string; contentColor: string }) => void;
}
```

### Selectores Internos (API)

```tsx
interface SelectorProps {
  onChange: (color: Color) => void;
  color: Color;
}
```

### HexSelector (API)

```tsx
interface HexSelectorProps {
  onChange: (color: string) => void;
  color: string;
}
```

## üîÑ Flujo de Datos

``` text
ColorPicker (estado principal)
    ‚Üì
Mode Selection ‚Üí Color Conversion
    ‚Üì
Selector Components ‚Üí Color Updates
    ‚Üì
onChange Callback ‚Üí External State
```

## üêõ Problemas Conocidos

1. **Performance**: Los gradientes se recalculan en cada render
2. **Consistencia**: Algunas propiedades de color usan nombres diferentes
3. **Memory**: Event listeners se recrean frecuentemente

## üöÄ Mejoras Futuras

- [ ] Memoizaci√≥n de gradientes
- [ ] Componente AlphaSlider reutilizable  
- [ ] Debouncing de onChange
- [ ] Preset de colores populares
- [ ] Historial de colores recientes
- [ ] Modo de contraste alto
- [ ] Soporte para m√°s espacios de color (LAB, XYZ)

## üìÑ Licencia

Este componente forma parte del proyecto kiyameh.dev.

---

**Nota**: Este componente utiliza la librer√≠a [colorjs.io](https://colorjs.io/) para las conversiones de color y c√°lculos precisos entre espacios de color.
