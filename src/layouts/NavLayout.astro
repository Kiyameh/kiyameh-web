---
/* Components */
import NavigationBar from '@/components/elements/NavigationBar/NavigationBar'
import MobileNavigationBar from '@/components/elements/MobileNavigationBar/MobileNavigationBar'

/* Variables */
const currentLocale = Astro.currentLocale ?? 'es'
const currentPath = Astro.url.pathname

/* 
 @version 1
 @revisado 04/09/2025
 @descripcion: Layout para navegación
*/
---

<div>
  <slot />
  <nav class="desktop-nav">
    <NavigationBar
      currentLocale={currentLocale}
      currentPath={currentPath}
      client:load
    />
  </nav>
  <nav class="mobile-nav">
    <MobileNavigationBar
      currentLocale={currentLocale}
      currentPath={currentPath}
      client:load
    />
  </nav>
</div>

<!-- Invocación de chatbot de  https://www.chatbase.co/dashboard -->

<script is:inline>
  ;(function () {
    if (!window.chatbase || window.chatbase('getState') !== 'initialized') {
      window.chatbase = function() {
        if (!window.chatbase.q) {
          window.chatbase.q = []
        }
        window.chatbase.q.push(arguments)
      }
      window.chatbase = new Proxy(window.chatbase, {
        get(target, prop) {
          if (prop === 'q') {
            return target.q
          }
          return (...args) => target(prop, ...args)
        },
      })
    }
    const onLoad = function () {
      const script = document.createElement('script')
      script.src = 'https://www.chatbase.co/embed.min.js'
      script.id = '9NhdnU6GkKfuFKS0wModc'
      script.domain = 'www.chatbase.co'
      document.body.appendChild(script)
    }
    if (document.readyState === 'complete') {
      onLoad()
    } else {
      window.addEventListener('load', onLoad)
    }
  })()
</script>

<style>
  .desktop-nav {
    display: block;
  }
  .mobile-nav {
    display: none;
  }
  @media (max-width: 768px) {
    .desktop-nav {
      display: none;
    }
    .mobile-nav {
      display: block;
    }
  }
</style>
